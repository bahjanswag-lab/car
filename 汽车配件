<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ±½é…å•†åŸ | Toyota/Hyundai/BMW ç¯å…·/ä¿é™©æ /é…ä»¶</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header class="nav">
    <div class="brand">æ±½é…å•†åŸ</div>
    <nav class="nav-actions">
      <input id="searchInput" class="search" type="search" placeholder="æœç´¢ï¼šè½¦å‹ / é…ä»¶åç§° / OEM ç¼–å·" />
      <select id="brandFilter" class="select">
        <option value="">å…¨éƒ¨å“ç‰Œ</option>
        <option value="Toyota">Toyota</option>
        <option value="Hyundai">Hyundai</option>
        <option value="BMW">BMW</option>
      </select>
      <select id="categoryFilter" class="select">
        <option value="">å…¨éƒ¨ç±»åˆ«</option>
        <option value="å‰å¤§ç¯">å‰å¤§ç¯</option>
        <option value="å°¾ç¯">å°¾ç¯</option>
        <option value="ä¿é™©æ ">ä¿é™©æ </option>
        <option value="é›¾ç¯">é›¾ç¯</option>
      </select>

      <button id="cartBtn" class="cart-btn" aria-label="æŸ¥çœ‹è´­ç‰©è½¦">
        ğŸ›’ <span id="cartCount">0</span>
      </button>
    </nav>
  </header>

  <!-- é¡¶éƒ¨å®£ä¼ æ¡ -->
  <div class="banner">
    <p>ğŸšš é˜¿æ–¯å¡”çº³/é˜¿æ‹‰æœ¨å›¾è‡ªææˆ–é…é€ | ğŸ§¾ æ”¯æŒæ‰¹å‘ä»· | âœ… è´¨ä¿ä¸é€€æ¢ï¼ˆå…·ä½“ä»¥æ¡æ¬¾ä¸ºå‡†ï¼‰</p>
  </div>

  <!-- å•†å“åˆ—è¡¨ -->
  <main class="container">
    <div id="productsGrid" class="grid"></div>
  </main>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div>Â© 2025 æ±½é…å•†åŸ | å¾®ä¿¡/WhatsApp: +7 xxx xxx xx xx | Instagram: @yourshop</div>
    <div>åœ°å€ï¼šå“ˆè¨å…‹æ–¯å¦ Â· é˜¿æ–¯å¡”çº³ï¼ˆç¤ºä¾‹ï¼‰ | è¥ä¸šæ—¶é—´ï¼š10:00â€“19:00</div>
  </footer>

  <!-- è´­ç‰©è½¦æŠ½å±‰ -->
  <aside id="cartDrawer" class="drawer">
    <div class="drawer-header">
      <h3>è´­ç‰©è½¦</h3>
      <button id="closeCart" class="icon-btn" aria-label="å…³é—­">âœ–</button>
    </div>
    <div id="cartItems" class="drawer-body"></div>
    <div class="drawer-footer">
      <div class="total-line">åˆè®¡ï¼š<strong id="cartTotal">0</strong> KZT</div>
      <button id="checkoutBtn" class="primary">æäº¤è¯¢ä»· / ç»“ç®—å ä½</button>
      <p class="note">å½“å‰æ¼”ç¤ºä¸ºå‰ç«¯ç‰ˆæœ¬ï¼šç‚¹å‡»â€œæäº¤è¯¢ä»·â€ä¼šç”Ÿæˆä¸€ä¸ªè®¢å•æ‘˜è¦ï¼ˆå¯å¤åˆ¶ç²˜è´´åˆ° WhatsApp/Instagram ç§ä¿¡ï¼‰ã€‚</p>
    </div>
  </aside>

  <!-- å•†å“è¯¦æƒ…æ¨¡æ€æ¡†ï¼ˆç®€å•ç‰ˆï¼‰ -->
  <div id="modal" class="modal hidden">
    <div class="modal-card">
      <button id="modalClose" class="icon-btn right">âœ–</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
:root{
  --bg:#0b0c10;
  --card:#151821;
  --muted:#a8b0c0;
  --accent:#00d1b2;
  --line:#242836;
  --text:#eaf0ff;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Microsoft YaHei",sans-serif}

/* é¡¶éƒ¨å¯¼èˆª */
.nav{
  position:sticky;top:0;z-index:10;
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 16px;border-bottom:1px solid var(--line);background:rgba(11,12,16,.8);backdrop-filter:blur(8px)
}
.brand{font-weight:800;letter-spacing:.5px}
.nav-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.search,.select{
  background:#0f1220;border:1px solid var(--line);color:var(--text);
  padding:10px 12px;border-radius:8px;min-width:200px
}
.cart-btn{
  display:flex;align-items:center;gap:6px;background:var(--accent);border:none;color:#012016;
  padding:10px 12px;border-radius:8px;font-weight:700;cursor:pointer
}

/* æ¨ªå¹… */
.banner{
  border-bottom:1px solid var(--line);text-align:center;background:#0f1220;color:var(--muted);
  padding:8px 10px
}

/* å¸ƒå±€ */
.container{padding:18px;max-width:1200px;margin:0 auto}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:16px}

/* å•†å“å¡ç‰‡ */
.card{
  background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden;display:flex;flex-direction:column
}
.thumb{aspect-ratio:4/3;background:#0f1220;display:flex;align-items:center;justify-content:center}
.thumb img{width:100%;height:100%;object-fit:cover;display:block}
.meta{padding:12px 14px;display:flex;flex-direction:column;gap:8px}
.title{font-weight:700;line-height:1.3}
.badges{display:flex;gap:6px;flex-wrap:wrap}
.badge{background:#0f1220;border:1px solid var(--line);color:var(--muted);padding:4px 8px;border-radius:999px;font-size:12px}
.price-line{display:flex;justify-content:space-between;align-items:center}
.add-btn{background:#0f1220;border:1px solid var(--accent);color:var(--accent);padding:8px 10px;border-radius:8px;cursor:pointer}
.add-btn:hover{filter:brightness(1.1)}
.link{color:var(--muted);font-size:13px;text-decoration:underline;cursor:pointer}

/* æŠ½å±‰è´­ç‰©è½¦ */
.drawer{
  position:fixed;right:-420px;top:0;height:100vh;width:420px;background:#0f1220;border-left:1px solid var(--line);
  transition:right .25s ease;display:flex;flex-direction:column
}
.drawer.open{right:0}
.drawer-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--line)}
.drawer-body{padding:12px 14px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:12px}
.drawer-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;background:#0b0e1a;border:1px solid var(--line);border-radius:8px;padding:8px}
.drawer-item img{width:64px;height:48px;object-fit:cover;border-radius:6px}
.qty{display:flex;align-items:center;gap:6px}
.icon-btn{background:transparent;border:1px solid var(--line);color:var(--text);padding:6px 8px;border-radius:8px;cursor:pointer}
.right{float:right}
.drawer-footer{border-top:1px solid var(--line);padding:12px 14px}
.total-line{margin:6px 0 10px}
.primary{width:100%;padding:12px;border:none;background:var(--accent);color:#012016;border-radius:10px;font-weight:800;cursor:pointer}
.note{color:var(--muted);font-size:12px}

/* æ¨¡æ€æ¡† */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center}
.modal.hidden{display:none}
.modal-card{width:min(720px,96vw);background:#0f1220;border:1px solid var(--line);border-radius:14px;padding:14px}

/* é¡µè„š */
.footer{border-top:1px solid var(--line);color:var(--muted);padding:20px 16px;text-align:center}
/* ç®€æ˜“å‰ç«¯â€œæ•°æ®æºâ€ï¼ˆå¯æ”¹æˆä»åç«¯/APIè¯»å–ï¼‰ */
const PRODUCTS = [
  {
    id: "TY-HL-COR12",
    name: "å‰å¤§ç¯ | Corolla 2012-2013 | å³ | ç”µè°ƒ",
    brand: "Toyota",
    model: "Corolla E170",
    category: "å‰å¤§ç¯",
    oem: "81145-02K90",
    price: 65000,
    img: "https://picsum.photos/seed/corolla-hl/640/480"
  },
  {
    id: "TY-BMP-CAM15",
    name: "å‰ä¿é™©æ  | Camry 2015-2017 | å«æ ¼æ …å­”",
    brand: "Toyota",
    model: "Camry XV50",
    category: "ä¿é™©æ ",
    oem: "52119-06B40",
    price: 95000,
    img: "https://picsum.photos/seed/camry-bmp/640/480"
  },
  {
    id: "HY-TL-SON18",
    name: "å°¾ç¯ | Sonata 2018-2019 | å·¦ | LED",
    brand: "Hyundai",
    model: "Sonata LF",
    category: "å°¾ç¯",
    oem: "92401-C2500",
    price: 78000,
    img: "https://picsum.photos/seed/sonata-tl/640/480"
  },
  {
    id: "BMW-FOG-F30",
    name: "é›¾ç¯æ€»æˆ | 3ç³» F30 2012-2018",
    brand: "BMW",
    model: "F30",
    category: "é›¾ç¯",
    oem: "63177248913",
    price: 42000,
    img: "https://picsum.photos/seed/bmw-fog/640/480"
  }
];

/* çŠ¶æ€ */
let state = {
  query: "",
  brand: "",
  category: "",
  cart: loadCart()
};

/* DOM */
const grid = document.getElementById("productsGrid");
const searchInput = document.getElementById("searchInput");
const brandFilter = document.getElementById("brandFilter");
const categoryFilter = document.getElementById("categoryFilter");
const cartBtn = document.getElementById("cartBtn");
const cartDrawer = document.getElementById("cartDrawer");
const cartCount = document.getElementById("cartCount");
const cartItems = document.getElementById("cartItems");
const cartTotal = document.getElementById("cartTotal");
const closeCart = document.getElementById("closeCart");
const checkoutBtn = document.getElementById("checkoutBtn");

const modal = document.getElementById("modal");
const modalClose = document.getElementById("modalClose");
const modalContent = document.getElementById("modalContent");

/* åˆå§‹åŒ– */
renderProducts();
renderCart();

/* äº‹ä»¶ç»‘å®š */
searchInput.addEventListener("input", (e)=>{ state.query = e.target.value.trim(); renderProducts(); });
brandFilter.addEventListener("change", (e)=>{ state.brand = e.target.value; renderProducts(); });
categoryFilter.addEventListener("change", (e)=>{ state.category = e.target.value; renderProducts(); });

cartBtn.addEventListener("click", ()=> cartDrawer.classList.add("open"));
closeCart.addEventListener("click", ()=> cartDrawer.classList.remove("open"));
modalClose.addEventListener("click", ()=> modal.classList.add("hidden"));
modal.addEventListener("click", (e)=>{ if(e.target===modal) modal.classList.add("hidden"); });

checkoutBtn.addEventListener("click", ()=>{
  const order = Object.values(state.cart).map(it=>`${it.name} x${it.qty} â€” ${it.price} KZT`).join("\n");
  const total = getCartTotal();
  const text = `ã€æ±½é…å•†åŸ è¯¢ä»·ã€‘\n${order}\nåˆè®¡ï¼š${total} KZT\nå®¢æˆ·è½¦å‹/è½¦æ¶å·(VIN)ï¼š\næ”¶è´§åŸå¸‚ï¼š\nè”ç³»äººï¼š\nç”µè¯/WhatsAppï¼š`;
  navigator.clipboard?.writeText(text);
  alert("å·²ç”Ÿæˆè¯¢ä»·æ‘˜è¦å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç›´æ¥ç²˜è´´åˆ° WhatsApp/Instagram ä¸æˆ‘ä»¬è”ç³»ã€‚");
});

/* æ¸²æŸ“å•†å“ */
function renderProducts(){
  const list = PRODUCTS.filter(p=>{
    const q = state.query.toLowerCase();
    const hit = !q || [p.name,p.model,p.oem,p.brand,p.category].some(x=>String(x).toLowerCase().includes(q));
    const brandOk = !state.brand || p.brand===state.brand;
    const catOk = !state.category || p.category===state.category;
    return hit && brandOk && catOk;
  });

  grid.innerHTML = list.map(p=>cardHTML(p)).join("") || emptyHTML();

  // ç»‘å®šå¡ç‰‡ä¸Šçš„æŒ‰é’®äº‹ä»¶
  document.querySelectorAll("[data-add]").forEach(btn=>{
    btn.addEventListener("click",()=>{
      const id = btn.getAttribute("data-add");
      addToCart(id, 1);
    });
  });
  document.querySelectorAll("[data-detail]").forEach(a=>{
    a.addEventListener("click",()=>{
      const id = a.getAttribute("data-detail");
      showDetail(id);
    });
  });
}

function cardHTML(p){
  return `
  <article class="card">
    <div class="thumb"><img src="${p.img}" alt="${p.name}" loading="lazy"></div>
    <div class="meta">
      <div class="title">${p.name}</div>
      <div class="badges">
        <span class="badge">${p.brand}</span>
        <span class="badge">${p.model}</span>
        <span class="badge">OEM: ${p.oem}</span>
        <span class="badge">${p.category}</span>
      </div>
      <div class="price-line">
        <strong>${p.price.toLocaleString()} KZT</strong>
        <button class="add-btn" data-add="${p.id}">åŠ å…¥è´­ç‰©è½¦</button>
      </div>
      <div class="link" data-detail="${p.id}">æŸ¥çœ‹è¯¦æƒ…</div>
    </div>
  </article>`;
}

function emptyHTML(){
  return `<div style="color:#a8b0c0">æœªæ‰¾åˆ°ç»“æœã€‚è¯•è¯•æ›´æ¢å…³é”®è¯ã€å“ç‰Œæˆ–ç±»åˆ«ã€‚</div>`;
}

/* è¯¦æƒ…æ¨¡æ€æ¡† */
function showDetail(id){
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p) return;
  modalContent.innerHTML = `
    <h3 style="margin-top:0">${p.name}</h3>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:start">
      <img src="${p.img}" alt="${p.name}" style="width:100%;border-radius:10px;object-fit:cover">
      <div>
        <p>å“ç‰Œï¼š${p.brand}</p>
        <p>è½¦å‹ï¼š${p.model}</p>
        <p>ç±»åˆ«ï¼š${p.category}</p>
        <p>OEMï¼š${p.oem}</p>
        <p>ä»·æ ¼ï¼š<strong>${p.price.toLocaleString()} KZT</strong></p>
        <button class="add-btn" onclick="addToCart('${p.id}',1)">åŠ å…¥è´­ç‰©è½¦</button>
      </div>
    </div>
  `;
  modal.classList.remove("hidden");
}

/* è´­ç‰©è½¦ */
function addToCart(id, qty=1){
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p) return;
  if(!state.cart[id]){
    state.cart[id] = { id:p.id, name:p.name, price:p.price, img:p.img, qty:0 };
  }
  state.cart[id].qty += qty;
  saveCart();
  renderCart();
}

function removeFromCart(id){
  delete state.cart[id];
  saveCart();
  renderCart();
}

function changeQty(id, delta){
  if(!state.cart[id]) return;
  state.cart[id].qty += delta;
  if(state.cart[id].qty <= 0) delete state.cart[id];
  saveCart();
  renderCart();
}

function renderCart(){
  const items = Object.values(state.cart);
  cartCount.textContent = items.reduce((s,it)=>s+it.qty,0);
  cartItems.innerHTML = items.map(it=>`
    <div class="drawer-item">
      <img src="${it.img}" alt="${it.name}" />
      <div>
        <div style="font-weight:700">${it.name}</div>
        <div style="color:#a8b0c0">${it.price.toLocaleString()} KZT</div>
      </div>
      <div class="qty">
        <button class="icon-btn" onclick="changeQty('${it.id}',-1)">ï¼</button>
        <div>${it.qty}</div>
        <button class="icon-btn" onclick="changeQty('${it.id}',+1)">ï¼‹</button>
        <button class="icon-btn" onclick="removeFromCart('${it.id}')">åˆ é™¤</button>
      </div>
    </div>
  `).join("") || `<div style="color:#a8b0c0">è´­ç‰©è½¦ä¸ºç©º</div>`;

  cartTotal.textContent = getCartTotal().toLocaleString();
}

function getCartTotal(){
  return Object.values(state.cart).reduce((s,it)=>s+it.price*it.qty,0);
}

/* æœ¬åœ°å­˜å‚¨ */
function saveCart(){ localStorage.setItem("carparts_cart", JSON.stringify(state.cart)); }
function loadCart(){ try{ return JSON.parse(localStorage.getItem("carparts_cart")||"{}"); }catch{return{}} }

